/* --- ОСНОВНАЯ КОЛОНКА --- */
.chat-column {
    height: 100dvh;
    /* Градиент в кофейных тонах (под вашу новую тему) */
    background: radial-gradient(circle at center, #292524, var(--bg-body));
    padding: 0 !important;
    position: relative;
}

/* --- ВАЖНО: ЭТОГО КЛАССА НЕ ХВАТАЛО --- */
.chat-area {
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: column; /* Выстраиваем Шапку, Чат и Футер в столбик */
    overflow: hidden; /* Чтобы скролл был только внутри messages-box */
}

/* --- ШАПКА ЧАТА --- */
.chat-header {
    height: 80px;
    flex-shrink: 0; /* Запрещаем сжиматься */
    background: rgba(41, 37, 36, 0.95); /* Плотный темный фон */
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--glass-border);
    padding: 0 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    z-index: 10;
}

/* --- ОБЛАСТЬ СООБЩЕНИЙ --- */
.messages-box {
    flex-grow: 1; /* Занимает всё свободное место между шапкой и футером */
    overflow-y: auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    scroll-behavior: smooth;
    /* Добавляем отступ снизу, чтобы текст не прилипал к полю ввода */
    padding-bottom: 20px;
}

/* --- КОНТЕЙНЕРЫ СООБЩЕНИЙ --- */
.message-container {
    max-width: 80%;
    margin-bottom: 16px;
    display: flex;
    flex-direction: column;
}

.message-sent {
    align-self: flex-end;
    align-items: flex-end;
}

.message-received {
    align-self: flex-start;
    align-items: flex-start;
}

/* --- ПУЗЫРЬКИ СООБЩЕНИЙ (Стили Coffee Theme) --- */
.msg-bubble {
    padding: 12px 18px;
    border-radius: 20px;
    font-size: 1rem;
    line-height: 1.5;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    word-wrap: break-word;
    max-width: 100%;
}

/* Ваши сообщения (Янтарный цвет) */
.message-sent .msg-bubble {
    background: var(--msg-sent); /* #78350f из root.css */
    color: #fff;
    border: 1px solid rgba(217, 119, 6, 0.4);
    border-bottom-right-radius: 4px;
}

/* Чужие сообщения (Серый камень) */
.message-received .msg-bubble {
    background: var(--msg-received); /* #44403c из root.css */
    color: #f5f5f4;
    border: 1px solid var(--glass-border);
    border-bottom-left-radius: 4px;
}

.msg-time {
    font-size: 0.7rem;
    margin-top: 6px;
    color: var(--text-muted);
    opacity: 0.8;
}

/* --- ПОДВАЛ (ВВОД) --- */
.chat-footer {
    flex-shrink: 0; /* Запрещаем сжиматься */
    padding: 15px 20px;
    background: #292524; /* Темно-коричневый фон */
    border-top: 1px solid var(--glass-border);
    /* Safe area для iPhone */
    padding-bottom: env(safe-area-inset-bottom, 20px);
}