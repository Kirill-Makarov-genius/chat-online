# üí¨ Chat Online ‚Äî Spring Boot –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —á–∞—Ç–∞

[![Java](https://img.shields.io/badge/Java-21%2B-007396?logo=java)](https://www.oracle.com/java/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.x-6DB33F?logo=springboot)](https://spring.io/projects/spring-boot)
[![Build with Maven](https://img.shields.io/badge/build-Maven-C71A36?logo=apachemaven)](https://maven.apache.org/)


–≠–ª–µ–≥–∞–Ω—Ç–Ω–æ–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ–µ –≤–µ–±‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ–Ω–ª–∞–π–Ω‚Äë—á–∞—Ç–∞. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∏ –≥—Ä—É–ø–ø–æ–≤—ã–µ –±–µ—Å–µ–¥—ã, –∏—Å—Ç–æ—Ä–∏—é –∏ —Å—Ç–∞—Ç—É—Å —Å–æ–æ–±—â–µ–Ω–∏–π, –∞ —Ç–∞–∫–∂–µ –æ—Å–Ω–æ–≤—É –¥–ª—è –æ–±–º–µ–Ω–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ WebSocket. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ Thymeleaf, –±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∞ ‚Äî –Ω–∞ Spring Boot.

---

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–û –ø—Ä–æ–µ–∫—Ç–µ](#-–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–∫–ª—é—á–µ–≤—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π](#-—Å—Ç–µ–∫-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö](#-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è-–¥–∞–Ω–Ω—ã—Ö)
- [–ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è](#-–ø–ª–∞–Ω—ã-—Ä–∞–∑–≤–∏—Ç–∏—è)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#%EF%B8%8F-–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## üß† –û –ø—Ä–æ–µ–∫—Ç–µ
Chat Online –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—é –≤–µ–±‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:
- –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: Controller ‚Üí Service ‚Üí Repository ‚Üí Entity/DTO/Mapper.
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ (Spring Security).
- –†–∞–±–æ—Ç–∞ —Å JPA/Hibernate –∏ PostgreSQL.
- –û—Å–Ω–æ–≤–∞ –¥–ª—è realtime –æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket.
- –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å –ø–æ–º–æ—â—å—é Thymeleaf.

> –ü—Ä–æ–µ–∫—Ç –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–∞–∫ –±–∞–∑–∞ –¥–ª—è pet‚Äë–ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –æ–±—É—á–µ–Ω–∏ÔøΩÔøΩ.

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∏ –≥—Ä—É–ø–ø–æ–≤—ã–µ –±–µ—Å–µ–¥—ã (ConversationType.PRIVATE/GROUP).
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å–ø–∏—Å–∫–µ –±–µ—Å–µ–¥.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–µ–∑–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–æ 90 —Å–∏–º–≤–æ–ª–æ–≤ —Å ¬´‚Ä¶¬ª.
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–º—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–π –±–µ—Å–µ–¥—ã ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∏–∫ –≤—Ç–æ—Ä–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞.
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏.
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —á–∞—Ç—ã –∏ –∏—Å—Ç–æ—Ä–∏—é.
- –ë–∞–∑–æ–≤–∞—è WebSocket‚Äë–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –±—É–¥—É—â–µ–≥–æ realtime‚Äë–æ–±–º–µ–Ω–∞.

---

## üõ† –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- Java 21+/25 (pom.xml: `<java.version>25</java.version>`)
- Spring Boot 4.0.0 (parent)
  - Spring Web MVC, Spring Data JPA, Spring Security, Spring WebSocket
  - Thymeleaf (–∏ thymeleaf‚Äëextras‚Äëspringsecurity6)
- PostgreSQL (runtime), –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ H2 –¥–ª—è dev
- Lombok
- Maven
- JUnit 5, Mockito (–º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã)

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
src/
  main/
    java/com/example/chatOnline/
      config/            # SecurityConfig, WebSocketConfig
      controller/        # AuthController, ConversationController, MessageController
      dto/               # ConversationDto, MessageRequestDto, MessageResponseDto, ...
      entity/            # User, Conversation, Message, ChatParticipant
      enums/             # ConversationType, MessageStatus
      exception/         # GlobalExceptionHandler, UserAlreadyExistsException
      mapper/            # ConversationMapper, MessageMapper
      repository/        # JPA —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
      seeder/            # DatabaseSeeder (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)
      service/           # ConversationService –∏ –¥—Ä.
      ChatOnlineApplication.java
    resources/
      templates/         # login.html, chat.html, chat-layout.html
      static/
      application.yml
  test/
    java/
      com/example/chatOnline/service/ConversationServiceTest.java
      com/example/time_tracker/TimeTrackerApplicationTests.java
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1) –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Java 21+ (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞)
- Maven
- PostgreSQL (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ H2 –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

2) –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–±–æ—Ä–∫–∞
```bash
mvn clean package
```

3) –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `src/main/resources/application.yml`:
```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/chat_online
    username: postgres
    password: your_password
  jpa:
    hibernate:
      ddl-auto: update   # –¥–ª—è dev; –Ω–∞ prod –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ validate
```

4) –ó–∞–ø—É—Å–∫
```bash
mvn spring-boot:run
```
–û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:8080/
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞: /login
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞: /chat

> –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `DatabaseSeeder` –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è.

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `application.yml` ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (Datasource, JPA, Thymeleaf, –∏ —Ç.–¥.)
- WebSocket endpoints ‚Äî –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –ø–æ–¥ –≤–∞—à–∏ –∑–∞–¥–∞—á–∏.
- Security ‚Äî –±–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤.

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ H2, –∑–∞–º–µ–Ω–∏–≤ –¥—Ä–∞–π–≤–µ—Ä –∏ URL.

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `ConversationService` ‚Äî –±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∞ —á–∞—Ç–æ–≤:
  - `saveMessage` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—á–∞—Å—Ç–∏—è, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `lastMessage` c –æ–±—Ä–µ–∑–∫–æ–π >90 —Å–∏–º–≤–æ–ª–æ–≤.
  - `getAllUserConversation` ‚Äî —Å–ø–∏—Å–æ–∫ –±–µ—Å–µ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è; –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —á–∞—Ç–æ–≤ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –∏–º—è —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞; –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π ‚Äî `"No messages yet"`.
  - `getHistoryOfConversation` ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤.
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã: `MessageController`, `ConversationController`.
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `WebSocketConfig`, `SecurityConfig`.
- –®–∞–±–ª–æ–Ω—ã: `chat-layout.html`, `chat.html`, `login.html`.

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã (JUnit 5 + Mockito):
- `src/test/java/com/example/chatOnline/service/ConversationServiceTest.java`

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
mvn test
```
–ü–æ–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å—Ü–µ–Ω–∞—Ä–∏–∏:
- –û—à–∏–±–∫–∏ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–¥–∏–∞–ª–æ–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω.
- –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É—á–∞—Å—Ç–Ω–∏–∫.
- –õ–æ–≥–∏–∫–∞ `lastMessage` (–ø–æ–ª–Ω–∞—è/–æ–±—Ä–µ–∑–∞–Ω–Ω–∞—è).
- –ò–º—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–π –±–µ—Å–µ–¥—ã (–Ω–∏–∫ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞).
- –ú–∞–ø–ø–∏–Ω–≥ –∏—Å—ÇÔøΩÔøΩ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –ø–æ—Ä—è–¥–∫—É.

---

## üå± –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
`DatabaseSeeder` –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–ø–æ–ª–Ω–∏—Ç—å –±–∞–∑—É —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –±–µ—Å–µ–¥—ã, —Å–æ–æ–±—â–µ–Ω–∏—è). –í–∫–ª—é—á–∞–π—Ç–µ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (–ø—Ä–æ—Ñ–∏–ª–∏/—É—Å–ª–æ–≤–∏—è –∑–∞–ø—É—Å–∫–∞).

---

## üó∫ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π realtime UI –Ω–∞ WebSocket/STOMP.
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ UI: —Å—Ç–∞—Ç—É—Å—ã, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–∞–±–æ—Ä–∞, online/offline.
- –†–æ–ª–∏/–ø—Ä–∞–≤–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ–ø–µ—Ä–∞—Ü–∏–π.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏ WebMvc —Ç–µ—Å—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (OpenAPI/Swagger).

---


## üôå –í–∫–ª–∞–¥
–∏–¥–µ–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è. –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ issues, –ø—Ä–µ–¥–ª–∞–≥–∞–π—Ç–µ —É–ª—É—á—à–µ–Ω–∏—è –∏ –Ω–æ–≤—ã–µ —Ñ–∏—á–∏.
